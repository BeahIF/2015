<html>
	<head>
		<script>
		//para trabalhar com localstorage usa-se string, o JSON.parse e para salvar usa-se o JSON.stringify
		localStorage.clear();
		var cont = 0;
		function novaLista(){
			var x = prompt("Digite o titulo da lista:");
			var novaLista = {"codigo": cont, "nome": x,  "presentes": []};
			localStorage[localStorage.length] = JSON.stringify(novaLista);
			cont = cont + 1;
		
		}
		function listarListas(){
			/*document.getElementById("mostraListas").innerHTML = "";
			for ( key in localStorage){
				document.getElementById("mostraListas").innerHTML+= localStorage.getItem(e)+"<br>";
			}*/
			for (key in localStorage){

				alert(JSON.parse(localStorage.getItem(key)).codigo +" -"+ JSON.parse(localStorage.getItem(key)).nome);
			}
		}
		function novoPresente(){
			var codLista = prompt("Digite o código da lista");
			var x = prompt("Digite o nome do presente:");
			var novopresente = x;
			//alert(JSON.stringify(localStorage.getItem(codLista)));
			var lista = JSON.parse(localStorage.getItem(codLista));
			lista.presentes.push(novopresente);
			localStorage.setItem(codLista, JSON.stringify(lista));

		}
		
		function listarPresentes(){
			for (key in localStorage){
				var lista = JSON.parse(localStorage.getItem(key));
				alert(lista.nome);
				var listap = JSON.parse(localStorage.getItem(key)).presentes;
				alert(listap);
				//var presentes = JSON.parse(localStorage.getItem(key).presentes);
				//alert(presentes.descricao);
				//var lista = localStorage.getItem(key);
				//alert(JSON.stringify(lista));
				/*
				for (var i = 0; i < lista.presentes.length; i++) {
					var presente = lista.presentes[i];
					alert(presente.descricao);
				}*/
				//alert(JSON.parse(localStorage.getItem(key)).codigo +"-"+ JSON.parse(localStorage.getItem(key)).nome + " TEM OS SEGUINTES Presentes:" + JSON.parse(localStorage.getItem(key)).presentes);
			}
		}

		function removerPresentes(){
			var codLista = prompt("Digite o código da lista que o presente será removido");
			var presentedigitado = prompt("Digite o nome do presete que deseja excluir");
			//var lista = JSON.parse(localstorage.getItem(codLista));
			var listap = JSON.parse(localStorage.getItem(codLista)).presentes;
			for (var i = 0; i < listap.length; i++) {
				var presente = listap[i];
				alert(presente);
				if(presentedigitado == presente){
					alert("e igual");
					localStorage(codLista).presentes.removeItem(i);
					//listap.splice(i, 1);
					//alert(listap);
				}else{
					alert("Esse presente não existe!");
				}
			}
			//localStorage.setItem(codLista, listap).presentes;
		}
		</script>
		<body>

		<p class="navbar-text">Minha Lista de Presentes</p>
    		<div>  Nova Lista </div>

    		
    		<br><button onclick="novaLista()"> Adiciona nova Lista </button>
        	<br><div id="mostraListas">Minhas Listas </div>
        	<br><button onclick="listarListas()">Mostra  </button>
        	<br><div> Novo Presente </div>
        	<br> <button onclick="novoPresente()"> Adiciona novo Presente </button>
        	<br> <div> Meus Presentes </div>
        	<button onclick="listarPresentes()"> Lista presentes </button>
    		<br> <div> Remover Presente </div>
        	<button onclick="removerPresentes()"> Remove presente </button>
    	</body>
